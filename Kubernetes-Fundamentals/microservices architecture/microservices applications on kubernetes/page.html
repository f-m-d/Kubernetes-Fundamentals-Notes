<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Microservices Applications on Kubernetes</title>
</head><body><b><div style="text-align: center"><span style="font-size: 31pt"><span style="color: #0000ff">Microservices Applications on Kubernetes</span></span></div></b><br/>
<br/>
<br/>
Abbiamo visto prima come funziona l'applicazione su Docker.<br/>
Ora vediamo come Deployarla su Kubernetes.<br/>
<br/>
Dobbiamo avere una chiara idea di cosa fare prima di procedere.<br/>
Quindi meglio scrivere gli obiettivi in modo chiaro:<br/>
<img src="1.png" /><br/>
<br/>
<br/>
<br/>
Sappiamo che non possiamo deployare direttamente i Container su Kubernetes.<br/>
Gli oggetti più piccoli che possiamo creare su Kubernetes sono i PODs.<br/>
Inoltre, dobbiamo vedere come permettere la connettività dei PODs.<br/>
<b>Inoltre, notiamo che la Worker app non è dipendente da nessun'altra opzione:<br/>
semplicemente legge e scrive ma non è richiesta da nessun'altra app in modo diretto.<br/>
</b><img src="1 2.png" /><b><br/>
</b><b><br/>
<br/>
<br/>
Quindi: come agire?<br/>
</b>Il primo passo sarebbe di creare un <b>ClusterIP Service,</b><br/>
per far si che REDIS sia accessibile sia dalla Voting-App che da Worker.<br/>
<b>ClusterIP perché non devono essere esposti fuori in modo diretto, ma solo nel Cluster.</b><br/>
Inoltre, dobbiamo dare un nome a questo servizio e chiamarlo nel modo<br/>
hardcoded del codice "redis"<br/>
<img src="1 3.png" /><br/>
<br/>
<b>NB: Non è buona prassi l'hardcoding, dovresti usare variabili di ambiente ed altre cose così,<br/>
</b><b>in modo da rendere il tutto più dinamico.</b><br/>
<br/>
La stessa cosa la facciamo per il servizio di PostgreSQL.<br/>
Inoltre, assicuriamoci di passare in modo corretto anche le credenziali per il database.<br/>
<img src="1 4.png" /><br/>
<br/>
<br/>
Infine, dobbiamo solo creare i NodePort per esporre le 2 webapp:<br/>
<img src="1 5.png" /><br/>
<br/>
<br/>
<hr/><hr/><br/>
<br/>
Ecco la source<br/>
<img src="1 6.png" />&nbsp;<br/>
</body></html>